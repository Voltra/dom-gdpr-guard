<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>dom-gdpr-guard - v3.0.1</title><meta name="description" content="Documentation for dom-gdpr-guard - v3.0.1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">dom-gdpr-guard - v3.0.1</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> dom-gdpr-guard - v3.0.1</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#dom-gdpr-guard" id="dom-gdpr-guard" style="color: inherit; text-decoration: none;">
  <h1>dom-gdpr-guard</h1>
</a>
<blockquote>
<p>Vanilla JavaScript binding to use gdpr-guard as efficiently and easily as possible</p>
</blockquote>
<center><img src="https://github.com/Voltra/dom-gdpr-guard/raw/dev/dom-gdpr-guard.png" alt="Logo" width="250"/></center>

<p>This library defines logic to display GDPR settings and allow to easily modify and save them.</p>
<p>If you need any help, you&#39;re more than welcome on my <a href="https://discordapp.com/invite/JtWAjbw">official Discord server</a>
dedicated to my open-source projects.</p>
<p>You can read the online documentation <a href="https://voltra.github.io/dom-gdpr-guard/">here</a> and take a look at
a <a href="https://github.com/Voltra/dom-gdpr-guard/tree/master/example">very simple example</a>.</p>

<a href="#how-to-import" id="how-to-import" style="color: inherit; text-decoration: none;">
  <h2>How to import</h2>
</a>
<pre><code class="language-javascript"><span class="hl-0">//// ES6</span><br/><span class="hl-1">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">gdprGuard</span><span class="hl-2">, </span><span class="hl-0">// everything that gdpr-guard exports</span><br/><span class="hl-2">    </span><span class="hl-0">// you could also directly import from gdpr-guard as it&#39;s a dependency</span><br/><span class="hl-2">    </span><span class="hl-3">render</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">renderInside</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;dom-gdpr-guard&quot;</span><br/><br/><span class="hl-0">//// Node</span><br/><span class="hl-5">const</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">gdprGuard</span><span class="hl-2">, </span><span class="hl-0">// everything that gdpr-guard exports</span><br/><span class="hl-2">    </span><span class="hl-0">// you could also directly import from gdpr-guard as it&#39;s a dependency</span><br/><span class="hl-2">    </span><span class="hl-6">render</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">renderInside</span><span class="hl-2">,</span><br/><span class="hl-2">} = </span><span class="hl-7">require</span><span class="hl-2">(</span><span class="hl-4">&quot;dom-gdpr-guard&quot;</span><span class="hl-2">);</span><br/><br/><span class="hl-0">//// Browser</span><br/><span class="hl-5">const</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-6">gdprGuard</span><span class="hl-2">, </span><span class="hl-0">// everything that gdpr-guard exports</span><br/><span class="hl-2">    </span><span class="hl-6">render</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">renderInside</span><span class="hl-2">,</span><br/><span class="hl-2">} = </span><span class="hl-3">window</span><span class="hl-2">.</span><span class="hl-3">domGdprGuard</span><span class="hl-2">;</span>
</code></pre>

<a href="#what39s-available-" id="what39s-available-" style="color: inherit; text-decoration: none;">
  <h2>What&#39;s available ?</h2>
</a>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">GdprManager</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;gdpr-guard&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-5">declare</span><span class="hl-2"> </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">renderInside</span><span class="hl-2">: (</span><span class="hl-3">target</span><span class="hl-2">: </span><span class="hl-8">Element</span><span class="hl-2">, </span><span class="hl-3">manager</span><span class="hl-2">: </span><span class="hl-8">GdprManager</span><span class="hl-2">, </span><span class="hl-3">payload</span><span class="hl-2">: </span><span class="hl-8">RenderPayload</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-8">Promise</span><span class="hl-2">&lt;</span><span class="hl-8">ReRenderFunction</span><span class="hl-2">&gt;;</span><br/><br/><span class="hl-5">declare</span><span class="hl-2"> </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">render</span><span class="hl-2">: (</span><span class="hl-3">manager</span><span class="hl-2">: </span><span class="hl-8">GdprManager</span><span class="hl-2">, </span><span class="hl-3">payload</span><span class="hl-2">: </span><span class="hl-8">RenderPayload</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-8">Promise</span><span class="hl-2">&lt;</span><span class="hl-8">Rendered</span><span class="hl-2">&gt;;</span><br/><br/><span class="hl-0">// render function : (subRenderFunction, savior, gdprItem) =&gt; Rendered</span><br/><span class="hl-5">declare</span><span class="hl-2"> </span><span class="hl-5">interface</span><span class="hl-2"> </span><span class="hl-8">RenderPayload</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">renderManager</span><span class="hl-2">: </span><span class="hl-8">ManagerRenderFunction</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">renderGroup</span><span class="hl-2">: </span><span class="hl-8">GroupRenderFunction</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">renderGuard</span><span class="hl-2">: </span><span class="hl-8">GuardRenderFunction</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-5">type</span><span class="hl-2"> </span><span class="hl-8">Rendered</span><span class="hl-2"> = </span><span class="hl-8">Element</span><span class="hl-2">;</span><br/><span class="hl-5">type</span><span class="hl-2"> </span><span class="hl-8">ReRenderFunction</span><span class="hl-2"> = () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-8">Promise</span><span class="hl-2">&lt;</span><span class="hl-8">void</span><span class="hl-2">&gt;;</span>
</code></pre>

<a href="#render" id="render" style="color: inherit; text-decoration: none;">
  <h3>render</h3>
</a>
<p><code>render</code> is a function that allows to render the GDPR state using the provided render functions, manager factory and
gdpr savior.</p>
<pre><code class="language-typescript"><span class="hl-5">interface</span><span class="hl-2"> </span><span class="hl-8">GdprRenderResult</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">rendered</span><span class="hl-2">: </span><span class="hl-8">Rendered</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">manager</span><span class="hl-2">: </span><span class="hl-8">GdprManager</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code></pre>
<p>It returns the rendered element so that you can mount it yourself in the DOM. It also returns the manager so that you
can query its state for conditional logic.</p>

<a href="#renderinside" id="renderinside" style="color: inherit; text-decoration: none;">
  <h3>renderInside</h3>
</a>
<p><code>renderInside</code> is a function that allows to render the GDPR state inside a container using the container as well as the
provided render functions, manager factory and gdpr savior.</p>
<pre><code class="language-typescript"><span class="hl-5">interface</span><span class="hl-2"> </span><span class="hl-8">ReRenderResult</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">render</span><span class="hl-2">: </span><span class="hl-8">ReRenderFunction</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">manager</span><span class="hl-2">: </span><span class="hl-8">GdprManager</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code></pre>
<p>It returns a function that when called will smartly re-render the GDPR state to avoid the pain of manually handling
updates efficiently (it uses DOM diffing). It also returns the manager so that you can query its state for conditional
logic.</p>

<a href="#savior-api" id="savior-api" style="color: inherit; text-decoration: none;">
  <h2>Savior API</h2>
</a>
<p>The <a href="https://voltra.github.io/gdpr-guard/interfaces/gdprsavior.html">Savior API</a> is mainly designed for library
developers, therefore you might need an additional library to provide with the savior you may need (
e.g. <code>gdpr-guard-local</code> for local storage).</p>
<p>Since v3.0.0, you handle the savior however you wish, it is no longer part of the render API.</p>

<a href="#design-choices" id="design-choices" style="color: inherit; text-decoration: none;">
  <h2>Design choices</h2>
</a>
<p>From a design standpoint, it&#39;s been a common trend across all my libraries to expose my APIs as asynchronous if users
might need to use their own asynchronous code inside. That comes from the idea that integrating asynchronous code inside
code that is required to be synchronous makes it really difficult to interface properly.</p>
<p>As such, even though I use the term <code>return</code> in the previous descriptions, it&#39;s more accurate to say that the returned
promise <strong>resolves</strong> to the described value.</p>
<p>That does not mean in any way that you <strong>have to</strong> return a promise, we can <code>await</code> on non-promise values, and they will
resolve immediately. Although, for good measures, if you can mark your functions as <code>async</code>, that would avoid any issues
and the code inside would still be the same.</p>
<p>One of the advantages of using promises and asynchronous functions as an API designer is that error handling is &quot;covered
for free&quot; with the promises&#39; exception propagation mechanisms.</p>

<a href="#changelog" id="changelog" style="color: inherit; text-decoration: none;">
  <h2>Changelog</h2>
</a>

<a href="#v300" id="v300" style="color: inherit; text-decoration: none;">
  <h3>V3.0.0</h3>
</a>
<p>The render API was flawed: it re-generated the manager on every render. As such, a decision was made that the user of
this library should get an instance of a <code>GdprManager</code> before rendering. As such, this package is now fully decoupled
from the Savior API: it&#39;s no longer the render API that calls <code>GdprSavior</code> methods, the user has full control of it.</p>
<p>The fact that you have to have a manager to render also means you can use the Events API from <code>gdpr-guard@^2.2.1</code>
before even rendering anything, which avoids input lags and reduces time-to-first-input.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/Renderer.html">Renderer</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/render.html">render</a></li><li class=" tsd-kind-module"><a href="modules/utils.html">utils</a></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="assets/main.js"></script></body></html>